# The below code does the following:
#
# This YAML file defines an organization named
# "CX Meraki Lab".  It further defines/creates a
# network named "Unified Branch 1", representing a 
# single small branch, under the organization:
#
# For the network created, it assigns values to variables
# previously defined in templates within the following
# YAML files:
#
# - templates-appliance-related.nac.yaml
# - templates-appliance-related.nac.yaml
# - templates-network-related.nac.yaml
#
# Note that these templates are not related to templates
# configured within the Cisco (formerly Meraki) dashboard.
#
# Finally, for the network created, it assigns values 
# to the variables which were defined within the template
# definitions in the YAML files.
#
meraki:
  domains:
    - name: !env domain
      administrator:
        name: admin
      organizations:
        # 
        # The below code does the following:
        #
        # Defines / creates an organization named with 
        # hardcoded name of "CX Meraki Lab", along with 
        # a single branch network.
        #
        - name: !env org_name
          managed: false
          networks:
            # 
            # The below code does the following:
            #
            # Defines/creates the spoke network named "Unified Branch 1".
            #
            # Assigns the following templates from the associated YAML
            # files as follows:
            #
            #  From templates-appliance-related.nac.yaml
            #  - app_settings
            #  - app_spoke
            #  - app_vlans
            #  - app_fw
            #  - app_ts
            #  - app_content
            #  - app_intrusion
            #  - app_malware
            #  - tfsteering
            #  - app_static_routes
            #
            #  From templates-inventory-related.nac.yaml
            #  - sb112
            #
            #  From templates-network-related.nac.yaml
            #  - product_types
            #  - snmp
            #  - syslog
            #  - network_settings
            #  - nw_switch
            #  - wireless
            #
            # Assigns values to the variables defined within the 
            # associated templates as follows:
            #
            #  From snmp
            #  - snmp_username
            #
            #  From syslog
            #  - syslog_server
            #
            #  From network_settings
            #  - local_status_page_username
            #
            #  From sb112
            #  - appliance-01
            #  - appliance-01-serial
            #  - switch-01
            #  - switch-01-serial
            #  - ap-01
            #  - ap-01-serial
            #  - ap-02
            #  - ap-02-serial
            #  - lat
            #  - lng
            #  - address
            #
            #  From app_spoke & app_vlans
            #  - vlan10_subnet
            #  - vlan20_subnet
            #  - vlan30_subnet
            #
            #  From app_vlans
            #  - vlan10_appliance_ip
            #  - vlan10_dhcp_start
            #  - vlan10_dhcp_end
            #  - vlan20_appliance_ip
            #  - vlan20_dhcp_start
            #  - vlan20_dhcp_end
            #  - vlan30_appliance_ip
            #  - vlan30_dhcp_start
            #  - vlan30_dhcp_end
            #
            #  From wireless
            #  - ap-tag1
            #  - ap-tag1-vlan-id
            #  - ap-tag2
            #  - ap-tag2-vlan-id
            #  - default-vlan-id-data
            #  - default-vlan-id-voice
            #  - data_ssid_schedules_enabled
            #  - voice_ssid_schedules_enabled
            #  - guest_ssid_schedules_enabled
            # 
            #  From app_static_routes
            #  - static_route1_subnet
            #  - static_route1_gw
            #  - static_route2_subnet
            #  - static_route2_gw
            #
            - name: Unified Branch 1
              templates: [product_types, snmp, syslog, network_settings, nw_switch, sb112, wireless, app_settings, app_spoke,  app_vlans, app_fw, app_ts,app_content, app_intrusion, app_mal, tfsteering, app_static_routes, appl_comonitoring]
              variables:
                snmp_username: user1
                syslog_server: 3.4.5.6
                local_status_page_username: admin
                appliance-01: Branch1-appliance-01
                switch-01: Branch1-Cat9300-01
                ap-01: Branch1-ap-01
                ap-02: Branch1-ap-02
                appliance-01-serial: ABCD-EFGH-IJKL
                switch-01-serial: ABCD-EFGH-IJKL
                ap-01-serial: ABCD-EFGH-IJKL
                ap-02-serial: ABCD-EFGH-IJKL
                lat: 37.41809510000001
                lng: -122.098531
                address: Wake Forest, N.C.
                vlan10_subnet: 10.1.10.0/24
                vlan10_appliance_ip: 10.1.10.1
                vlan10_dhcp_start: 10.1.10.40
                vlan10_dhcp_end: 10.1.10.50
                vlan20_subnet: 10.1.20.0/24
                vlan20_appliance_ip: 10.1.20.1
                vlan20_dhcp_start: 10.1.20.40
                vlan20_dhcp_end: 10.1.20.50
                vlan30_subnet: 10.1.30.0/24
                vlan30_appliance_ip: 10.1.30.1
                vlan30_dhcp_start: 10.1.30.40
                vlan30_dhcp_end: 10.1.30.50
                hub_network_name: Unified Hub
                ap-tag1: ap-group1
                ap-tag2: ap-group2
                default-vlan-id-data: 10
                default-vlan-id-voice: 20
                ap-tag1-vlan-id: 11
                ap-tag2-vlan-id: 12
                data_ssid_schedules_enabled: true
                voice_ssid_schedules_enabled: true
                guest_ssid_schedules_enabled: true
                static_route1_subnet: 10.101.10.0/24
                static_route1_gw: 10.1.10.2
                # static_route1_enabled: true
                static_route2_subnet: 10.101.20.0/24
                static_route2_gw: 10.1.20.2
                # static_route2_enabled: true
                splash_reply_to_email_address: example@example.com
                      # 
             # The below code does the following:
             #
             # Defines/creates the hub network named "Unified Hub".
             #
             # Assigns the following templates from the associated YAML
             # files as follows:
             #
             #   From templates-appliance-related.nac.yaml
             #   - app_settings
             #   - app_hub
             #   - app_vlans
             #
             #   From templates-network-related.nac.yaml
             #   - product_types
             #   - snmp
             #   - syslog
             #   - network_settings
             #
             # Assigns values to the variables defined within the 
             # associated templates as follows:
             #
             #   From snmp
             #   - snmp_username
             #
             #   From syslog
             #   - syslog_server
             #
             #   From network_settings
             #   - local_status_page_username
             #
             #   From hub (found in templates-inventory-related.nac.yaml)
             #   - appliance-01-serial
             #   - appliance-01
             #   - lat
             #   - lng
             #   - address
             #
             #   From app_hub & app_vlans
             #   - vlan10_subnet
             #   - vlan20_subnet
             #   - vlan30_subnet
             #
             #   From app_vlans
             #   - vlan10_appliance_ip
             #   - vlan10_dhcp_start
             #   - vlan10_dhcp_end
             #   - vlan20_appliance_ip
             #   - vlan20_dhcp_start
             #   - vlan20_dhcp_end
             #   - vlan30_appliance_ip
             #   - vlan30_dhcp_start
             #   - vlan30_dhcp_end
             #
            - name: Unified Hub
              templates: [product_types, hub, snmp, syslog, app_settings, network_settings, app_hub, app_vlans]
              variables:
                snmp_username: user1
                syslog_server: 3.4.5.6
                local_status_page_username: admin
                appliance-01-serial: ABCD-EFGH-IJKL
                appliance-01: Hub
                vlan10_subnet: 10.1.1.0/24
                vlan10_appliance_ip: 10.1.1.1
                vlan10_dhcp_start: 10.1.1.40
                vlan10_dhcp_end: 10.1.1.50
                vlan20_subnet: 10.1.2.0/24
                vlan20_appliance_ip: 10.1.2.1
                vlan20_dhcp_start: 10.1.2.40
                vlan20_dhcp_end: 10.1.2.50
                vlan30_subnet: 10.1.3.0/24
                vlan30_appliance_ip: 10.1.3.1
                vlan30_dhcp_start: 10.1.3.40
                vlan30_dhcp_end: 10.1.3.50
                ap-tag1: ap-group1
                ap-tag2: ap-group2
                default-vlan-id-data: 10
                default-vlan-id-voice: 20
                ap-tag1-vlan-id: 11
                ap-tag2-vlan-id: 12
                lat: 37.41809510000001
                lng: -122.098531
                address: Cary, N.C.
